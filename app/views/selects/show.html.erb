<%=

if field.option_borrow.nil?
  options =  (!@options[field.tablename.to_sym].nil? && !@options[field.tablename.to_sym][field.field.to_sym].nil?) ? @options[field.tablename.to_sym][field.field.to_sym] : displayable_field[:options]
 else
   options = MegaBar::Option.where(field_id: 19).pluck(:text, :value)
end

include_blank = select.multiple == true ? false : "Select " + displayable_field[:field_display].header

if field.accessor == 'y' 
  selected = @mega_instance.send(field.field)
else 
  selected =  @default_options[field.field.to_sym] ? @default_options[field.field.to_sym] : value
end
select(
  param_from_tablename(@mega_model_properties, field.tablename),
  field.field,
  options,  
  {include_blank: include_blank, selected: selected },
  {multiple: select.multiple},

)%>


